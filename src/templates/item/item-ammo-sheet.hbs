<div class="dh-wrapper">
    <form class="dh-item" autocomplete="off">
        <div class="dh-panel dh-grid-col-6">
            <div class="dh-header">
                <div class="dh-header__info">
                    <div class="dh-header__logo dh-header__item-wrapper--span-4">
                        <img class="dh-header__logo-image" src="{{item.img}}" data-edit="img" alt="{{item.name}}" title="{{item.name}}" />
                    </div>
                    <div class="dh-header__item-wrapper--span-4">
                        <span class="dh-header__title">Name</span>
                        <input class="dh-header__input" name="name" type="text" value="{{item.name}}" />
                    </div>
                    <div class="dh-header__item-wrapper">
                        <span class="dh-header__title">Source</span>
                        <input class="dh-header__input" name="data.source" type="text" value="{{item.system.source}}" />
                    </div>
                    <div class="dh-header__item-wrapper--span-2">
                        <span class="dh-header__title">Availability</span>
                        <select class="dh-header__select" name="data.availability">
                            {{selectOptions (arrayToObject dh.items.availability) selected=item.system.availability}}
                        </select>
                    </div>
                    <div class="dh-header__item-wrapper">
                        <span class="dh-header__title">In Backpack</span>
                        <input name="data.backpack.inBackpack" type="checkbox" data-dtype="Boolean" {{checked
                            item.system.backpack.inBackpack}}/>
                    </div>
                    <div class="dh-header__item-wrapper--span-4">
                        <span class="dh-header__title">Weapon Types</span>
                        <input name="data.weapon_type" type="text" value="{{item.system.weapon_type}}" />
                    </div>
                    <div class="dh-header__item-wrapper--span-4">
                        <span class="dh-header__title">Effect</span>
                        <textarea class="dh-header__textarea" name="data.effect">{{item.system.effect}}</textarea>
                    </div>
                </div>
            </div>
        </div>
        <div class="dh-panel dh-grid-col-2 dh-grid-row-1">
            <h1 class="dh-panel__header">Damage</h1>
            <div class="dh-field__wrapper">
                <span class="dh-field__header">Modification</span>
                <input class="dh-field__input" type="text" name="data.damage" value="{{item.system.damage}}" />
            </div>
            <div class="dh-field__wrapper">
                <span class="dh-field__header">Type</span>
                <select class="dh-field__input" name="data.damageType">
                    <option value=""></option>
                    {{selectOptions (arrayToObject dh.combat.damage_types) selected=item.system.damageType}}
                </select>
            </div>
            <div class="dh-field__wrapper">
                <span class="dh-field__header">Pen</span>
                <input class="dh-field__input" type="text" name="data.penetration"
                       value="{{item.system.penetration}}" />
            </div>
            <div class="dh-field__wrapper">
                <span class="dh-field__header">Attack Bonus</span>
                <input class="dh-field__input" type="text" name="data.attackBonus"
                       value="{{item.system.attackBonus}}" />
            </div>
        </div>
        <div class="dh-panel dh-grid-col-4">
            <h1 class="dh-panel__header">Special</h1>
            <div class="dh-table--border dh-attackspecialtable--border">
                <div class="table-row--head">
                    <div class="table-cell--span2">Name</div>
                    <div class="table-cell">Enabled</div>
                    <div class="table-cell">Level</div>
                    <div class="table-cell--last"></div>
                </div>
                {{#each item.items as | embedded |}}
                    {{#if embedded.isAttackSpecial}}
                        <div class="table-row">
                            <div class="table-cell--settingstoggle">
                                <label class="dh-control-button item-edit" data-item-id="{{embedded.id}}">
                                            <span class="dh-control-button__span material-icons">{{defaultVal icon
                                                                                                              'settings'}}</span>
                                </label>
                            </div>
                            <div class="table-cell--left">
                                {{> systems/dark-heresy-2nd/templates/actor/partial/trait-toggle.hbs toggle=(concat 'description_' embedded.id) text=embedded.name}}
                            </div>
                            <div class="table-cell">
                                <span class="display">{{embedded.system.enabled}}</span>
                            </div>
                            <div class="table-cell">
                                <span class="display">{{defaultVal embedded.system.level 'N/A'}}</span>
                            </div>
                            <div class="table-cell--last">
                                <label class="dh-control-button item-delete" data-item-id="{{embedded.id}}">
                                            <span class="dh-control-button__span material-icons">{{defaultVal icon
                                                                                                              'delete'}}</span>
                                </label>
                            </div>
                            <div class="table-cell--description description_{{embedded.id}}" {{hideIfNot
                                (isExpanded (concat 'description_' embedded.id ))}}>
                                <span>{{embedded.system.description}}</span>
                            </div>
                        </div>
                    {{/if}}
                {{/each}}
            </div>
        </div>
    </form>
</div>


