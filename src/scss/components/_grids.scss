%row {
    display: grid;
    grid-template-columns: 1.5rem 1fr 5rem 3rem;
    grid-column: 1 / -1;
}

%cell {
    display: flex;
    justify-content: space-around;
    align-items: center;
    text-align: center;

    &:nth-child(2) {
        text-align: left;
    }

    span {
        padding: 1px;
    }

    span:empty {
        display: none;
    }

    select,
    input[type="text"],
    input[type="number"] {
        height: 100%;
    }
}

%cell--head {
    &:first-child {
        text-align: left;
    }

    &:not(:first-child) {        
        text-align: center;
    }
}

%description {
    @extend %cell;
    grid-column: 1 / -1;
}

%grid-row {
    border-bottom: $grid-border;
}

%grid-row--unknown {
    background-color: rgba(255, 0, 0, .1);
}

%grid-row--inverted {
    border-bottom: 0;
    border-top: $grid-border;
}

%grid-row-head {
    @extend %grid-row;
    font-weight: bold;
}

%grid-cell {
    border-right: $grid-border;
    overflow: hidden;

    input[type="number"] {
        height: 100%;
    }

    > span[name*="attr"] {
        font-family: $font-family-alt;
        font-size: 1.25rem;
    }
}

%grid-cell--last {
    @extend %grid-cell;
    border-right: 0;
}

%grid-cell--highlight {
    font-weight: bold;
}

%grid-cell--description {
    border-top: $grid-border-description;

    font-size: 0.95em;
    font-style: italic;
}

.dh {
    @each $table in "skill", "talent", "trait", "corruption", "insanity", "armour", "critical", "cybernetic", "weapon", "experience", "wounds" {
        &-#{$table}table {
            min-height:50px
        }

        &-#{$table}table__row--head {
            @extend %grid-row-head;
        }

        &-#{$table}table__row {
            @extend %grid-row;
        }

        &-#{$table}table__row--unknown {
            @extend %grid-row--unknown;
        }

        &-#{$table}table__cell {
            @extend %grid-cell;
        }

        &-#{$table}table__cell--span2 {
            @extend %grid-cell;
        }

        &-#{$table}table__cell--description {
            @extend %grid-cell--description;
        }

        &-#{$table}table__cell--last {
            @extend %grid-cell--last;
        }

        &-#{$table}table__cell--highlight {
            @extend %grid-cell--highlight;
        }
    }

    &-field,
    &-textarea {
        @extend %grid-row;
    }

    &-field__header,
    &-field__input,
    &-textarea__header,
    &-textarea__input {
        @extend %grid-cell;
    }

    button {
        cursor: pointer;
    }

    // Characteristic Table
    &-chartable {
        display: grid;
        grid-template-columns: .75fr repeat(10, .5fr);
        grid-template-rows: repeat(7, 1fr);
        grid-auto-flow: column;

        select,
        input[type=number],
        .dh-chartable__cell,
        .dh-chartable__cell--head {
            height: 100%;
            text-align: center !important;
        }

        &__cell {
            border-left: $grid-border;
            border-top: $grid-border;

            font-family: $font-family-alt;

            &--left {
                font-weight: bold;
                border-top: $grid-border;
            }

            &--head {
                font-weight: bold;
                border-left: $grid-border;
            }

            &--highlight {
                font-weight: bold;
            }
        }
    }

    &-skills {
        h1 {
            grid-column: 1 / -1;
        }
    }

    &-skilltable {
        &__row {
            display: grid;
            grid-template-columns: .9fr .7fr .4fr .4fr;
            grid-column: 1 / -1;

            &--head {
                @extend .dh-skilltable__row;
                .dh-skilltable__cell {
                    text-align: center;
                    &:first-child {
                        text-align: left;
                    }
                }
            }

            &--specialisation {
                @extend .dh-skilltable__row;
                background: rgba(36, 107, 131, 0.1);
                grid-column: 1 / -1;
                padding: 0; 
            }

            &--grouped {
                @extend .dh-skilltable__row;
                grid-template-columns: 1rem 1fr;
                background: rgba(36, 107, 131, 0.1);
                padding: 0; 
            }
        }

        &__cell {
            height: 100%;
            text-align: center;
            overflow: hidden;

            &:first-child {
                font-weight: bolder;
            }

            label,
            span {
                padding: 1px;
            }

            select,
            input[type="number"],
            input[type="text"] {
                height: 100%;
                text-align: center !important;
            }

            &--left {
                @extend .dh-skilltable__cell;
                text-align: left;
            }

            &--last {
                @extend .dh-skilltable__cell;
            }

            &--nosettings {
                @extend .dh-skilltable__cell;
                grid-column: 2;
                text-align: left;
            }

            &--span2 {
                @extend .dh-skilltable__cell;
                grid-column: span 2;
            }

            &--grouped {
                @extend .dh-skilltable__cell;
                @extend %grid-cell--last;
                padding-top: 3px;
                font-weight: bold;
                text-align: center !important;
                text-indent: -1.5rem;
                text-transform: uppercase;
            }

            &--settingstoggle + #{&}--grouped {
                grid-column-start: 2;
            }
        }

        &__roll {
            text-align: left !important;
            span {
                text-align: left;
            }
        }
    }

    &-talenttable,
    &-traittable,
    &-insanitytable,
    &-corruptiontable {
        &__row {
            @extend %row;
            &--head {
                @extend %row;
                div[class*=cell] {
                    @extend %cell--head;
                }
            }
        }

        &__cell {
            @extend %cell;
            &--description {
                @extend %description;
                span {
                    text-align: left;
                }
            }

            &--last {
                @extend %cell;
            }

            &--span2 {
                grid-column: span 2;
            }

            &--span3 {
                grid-column: span 3;
            }
        }
    }

    &-corruptiontable,
    &-insanitytable {
        &__row--head,
        &__row {
            grid-template-columns: 1.5rem 1fr 3rem;
        }
    }

    &-experiencetable{
        &__row {
            @extend %row;
            &--head {
                @extend %row;
                div[class*=cell] {
                    @extend %cell--head;
                }
            }
        }

        &__cell {
            @extend %cell;
            &--description {
                @extend %description;
                span {
                    text-align: left;
                }
            }

            &--last {
                @extend %cell;
            }

            &--ltitle {
                @extend %cell;
                text-align: left;
            }

            &--span2 {
                grid-column: span 2;
            }

            &--span3 {
                grid-column: span 3;
            }
        }
    }    
    
    &-experiencetable {
        &__row {
            &--head {
                div[class*=cell] {
                    &:first-child {
                        grid-column: span 1;
                    }
                }
            }
        }
    }

    &-experiencetable {
        &__row--head,
        &__row {
            grid-template-columns: 1fr .25fr;
        }
    }

    &-armourtable,
    &-criticaltable,
    &-cybernetictable,
    &-weapontable {
        &__row {
            @extend %row;
            &--head {
                @extend %row;
                div[class*=cell] {
                    @extend %cell--head;
                }
            }
        }

        &__cell {
            @extend %cell;
            &--description {
                @extend %description;
                span {
                    text-align: left;
                }
            }

            &--settingstoggle {
                @extend %cell;
            }

            &--last {
                @extend %cell;
            }

            &--span2 {
                grid-column: span 2;
            }

            &--span3 {
                grid-column: span 3;
            }
        }
    }

    &-cybernetictable{
        &__row--head,
        &__row {
            grid-template-columns: 1.5rem 1fr 1fr 4rem;
        }
    }

    &-criticaltable{
        &__row--head,
        &__row {
            grid-template-columns: 1.5rem 1fr 1fr 4rem;
        }
    }

    &-armourtable,
    &-weapontable {
        &__row--head,
        &__row {
            grid-template-columns: 1.5rem 2fr 1fr 1fr .75fr .6fr;
        }
    }

    &-advancetable {
        &__row--head,
        &__row {
            @extend %row;
            grid-template-columns: 2fr 1fr;
            gap: $margin-small;
        }
    }

    &-armour {
        &__row {
            display: flex;
            justify-content: space-between;
            max-height: 8rem;
        }
        &__block {
            flex-grow: 0;
            flex-basis: 30%;
            text-align: center;

            &--head, 
            &--leftarm,
            &--rightarm,
            &--body,
            &--rightleg,
            &--leftleg,
            &--shield,
            &--toughness {
                @extend .dh-armour__block;
            }

            &--shield, 
            &--toughness {
                margin-top: 1em;
            }
        }
        
        &__display {
            font-family: $font-family-alt;
            font-size: 14pt;
            font-weight: bold;
            line-height: 3.5rem;
            display: inline-block;
            width: 3.5rem;
            height: 3.5rem;
        }
    }
}
